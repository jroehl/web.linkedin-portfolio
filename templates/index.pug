include ./styling.pug
include ./sections.pug
include ./ie.pug

-
  const {
    PROFILE: {
      values: [profile],
    },
    EMAIL_ADDRESSES: {
      values: [email],
    },
  } = data;

  const name = getName(profile);
doctype html
html(class="no-js", lang="en")
  head
    title=`${name} - ${profile.headline}`
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1, user-scalable=no')
    meta(name='description', content=profile.summary)
    meta(name='author', content=name)
    +ieStyle('if lte IE 11')
    link(rel="stylesheet", href="../styles/index.css")
    link(rel="stylesheet", href="../styles/media.css")
    link(rel="shortcut icon" href=email.favicon)
    link(
      rel='stylesheet',
      href='https://use.fontawesome.com/releases/v5.7.2/css/all.css',
      integrity='sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr',
      crossorigin='anonymous'
    )
    style !{meta.inlineStyles}
  body
    +ieElements()
    main
      article.warn(style={ display: 'none' })
        h4 This website is optimized for mobile devices
      section.background
        i.fas.fa-palette.invert
        div.container(style={ height: `${100 - (meta.stacks.length) * 5}%` })
          each key in meta.background.keys
            div.animated-load
              +router(key)
      span.stacks
        each section, i in meta.stacks
          +renderStack(section, i + 1, meta.stacks)
    script const palettes = !{JSON.stringify(config.palettes)}
    script(src='../src/index.js')
